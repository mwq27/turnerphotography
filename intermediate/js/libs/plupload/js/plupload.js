(function(){var u=0,p=[],n={},r={},z={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},o=/[<>&\"\']/g,y,x=window.setTimeout,w={},v;function s(){this.returnValue=false}function q(){this.cancelBubble=true}(function(e){var d=e.split(/,/),c,a,b;for(c=0;c<d.length;c+=2){b=d[c+1].split(/ /);for(a=0;a<b.length;a++){r[b[a]]=d[c]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/vnd.rn-realvideo,rv,text/plain,asc txt text diff log,application/octet-stream,exe");var t={VERSION:"1.4.3.2",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:r,extend:function(a){t.each(arguments,function(c,b){if(b>0){t.each(c,function(d,e){a[e]=d})}});return a},cleanName:function(c){var b,a;a=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(b=0;b<a.length;b+=2){c=c.replace(a[b],a[b+1])}c=c.replace(/\s+/g,"_");c=c.replace(/[^a-z0-9_\-\.]+/gi,"");return c},addRuntime:function(b,a){a.name=b;p[b]=a;p.push(a);return a},guid:function(){var b=new Date().getTime().toString(32),a;for(a=0;a<5;a++){b+=Math.floor(Math.random()*65535).toString(32)}return(t.guidPrefix||"p")+b+(u++).toString(32)},buildUrl:function(b,c){var a="";t.each(c,function(d,e){a+=(a?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(d)});if(a){b+=(b.indexOf("?")>0?"&":"?")+a}return b},each:function(b,a){var c,d,e;if(b){c=b.length;if(c===y){for(d in b){if(b.hasOwnProperty(d)){if(a(b[d],d)===false){return}}}}else{for(e=0;e<c;e++){if(a(b[e],e)===false){return}}}}},formatSize:function(a){if(a===y||/\D/.test(a)){return t.translate("N/A")}if(a>1073741824){return Math.round(a/1073741824,1)+" GB"}if(a>1048576){return Math.round(a/1048576,1)+" MB"}if(a>1024){return Math.round(a/1024,1)+" KB"}return a+" b"},getPos:function(d,i){var h=0,a=0,f,g=document,c,b;d=d;i=i||g.body;function e(D){var m,j,k=0,l=0;if(D){j=D.getBoundingClientRect();m=g.compatMode==="CSS1Compat"?g.documentElement:g.body;k=j.left+m.scrollLeft;l=j.top+m.scrollTop}return{x:k,y:l}}if(d&&d.getBoundingClientRect&&(navigator.userAgent.indexOf("MSIE")>0&&g.documentMode!==8)){c=e(d);b=e(i);return{x:c.x-b.x,y:c.y-b.y}}f=d;while(f&&f!=i&&f.nodeType){h+=f.offsetLeft||0;a+=f.offsetTop||0;f=f.offsetParent}f=d.parentNode;while(f&&f!=i&&f.nodeType){h-=f.scrollLeft||0;a-=f.scrollTop||0;f=f.parentNode}return{x:h,y:a}},getSize:function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(b){var a;if(typeof(b)=="string"){b=/^([0-9]+)([mgk]+)$/.exec(b.toLowerCase().replace(/[^0-9mkg]/g,""));a=b[2];b=+b[1];if(a=="g"){b*=1073741824}if(a=="m"){b*=1048576}if(a=="k"){b*=1024}}return b},xmlEncode:function(a){return a?(""+a).replace(o,function(b){return z[b]?"&"+z[b]+";":b}):a},toArray:function(a){var b,c=[];for(b=0;b<a.length;b++){c[b]=a[b]}return c},addI18n:function(a){return t.extend(n,a)},translate:function(a){return n[a]||a},isEmptyObj:function(b){if(b===y){return true}for(var a in b){return false}return true},hasClass:function(a,b){var c;if(a.className==""){return false}c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");return c.test(a.className)},addClass:function(a,b){if(!t.hasClass(a,b)){a.className=a.className==""?b:a.className.replace(/\s+$/,"")+" "+b
}},removeClass:function(a,b){var c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");a.className=a.className.replace(c,function(e,f,d){return f===" "&&d===" "?" ":""})},getStyle:function(a,b){if(a.currentStyle){return a.currentStyle[b]}else{if(window.getComputedStyle){return window.getComputedStyle(a,null)[b]}}},addEvent:function(b,g,a){var c,d,e,f;f=arguments[3];g=g.toLowerCase();if(v===y){v="Plupload_"+t.guid()}if(b.attachEvent){c=function(){var h=window.event;if(!h.target){h.target=h.srcElement}h.preventDefault=s;h.stopPropagation=q;a(h)};b.attachEvent("on"+g,c)}else{if(b.addEventListener){c=a;b.addEventListener(g,c,false)}}if(b[v]===y){b[v]=t.guid()}if(!w.hasOwnProperty(b[v])){w[b[v]]={}}d=w[b[v]];if(!d.hasOwnProperty(g)){d[g]=[]}d[g].push({func:c,orig:a,key:f})},removeEvent:function(b,g){var d,a,e;if(typeof(arguments[2])=="function"){a=arguments[2]}else{e=arguments[2]}g=g.toLowerCase();if(b[v]&&w[b[v]]&&w[b[v]][g]){d=w[b[v]][g]}else{return}for(var f=d.length-1;f>=0;f--){if(d[f].key===e||d[f].orig===a){if(b.detachEvent){b.detachEvent("on"+g,d[f].func)}else{if(b.removeEventListener){b.removeEventListener(g,d[f].func,false)}}d[f].orig=null;d[f].func=null;d.splice(f,1);if(a!==y){break}}}if(!d.length){delete w[b[v]][g]}if(t.isEmptyObj(w[b[v]])){delete w[b[v]];try{delete b[v]}catch(c){b[v]=y}}},removeAllEvents:function(a){var b=arguments[1];if(a[v]===y||!a[v]){return}t.each(w[a[v]],function(c,d){t.removeEvent(a,d,b)})}};t.Uploader=function(d){var f={},a,b=[],e;a=new t.QueueProgress();d=t.extend({chunk_size:0,multipart:true,multi_selection:true,file_data_name:"file",filters:[]},d);function c(){var i,h=0,j;if(this.state==t.STARTED){for(j=0;j<b.length;j++){if(!i&&b[j].status==t.QUEUED){i=b[j];i.status=t.UPLOADING;this.trigger("BeforeUpload",i);this.trigger("UploadFile",i)}else{h++}}if(h==b.length){this.trigger("UploadComplete",b);this.stop()}}}function g(){var h,i;a.reset();for(h=0;h<b.length;h++){i=b[h];if(i.size!==y){a.size+=i.size;a.loaded+=i.loaded}else{a.size=y}if(i.status==t.DONE){a.uploaded++}else{if(i.status==t.FAILED){a.failed++}else{a.queued++}}}if(a.size===y){a.percent=b.length>0?Math.ceil(a.uploaded/b.length*100):0}else{a.bytesPerSec=Math.ceil(a.loaded/((+new Date()-e||1)/1000));a.percent=a.size>0?Math.ceil(a.loaded/a.size*100):0}}t.extend(this,{state:t.STOPPED,runtime:"",features:{},files:b,settings:d,total:a,id:t.guid(),init:function(){var m=this,i,j,k,B=0,h;if(typeof(d.preinit)=="function"){d.preinit(m)}else{t.each(d.preinit,function(A,D){m.bind(D,A)})}d.page_url=d.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(d.url)){d.url=d.page_url+d.url}d.chunk_size=t.parseSize(d.chunk_size);d.max_file_size=t.parseSize(d.max_file_size);m.bind("FilesAdded",function(N,K){var L,M,I=0,A,J=d.filters;if(J&&J.length){A=[];t.each(J,function(C){t.each(C.extensions.split(/,/),function(D){if(/^\s*\*\s*$/.test(D)){A.push("\\.*")}else{A.push("\\."+D.replace(new RegExp("["+("/^$.*+?|()[]{}\\".replace(/./g,"\\$&"))+"]","g"),"\\$&"))}})});A=new RegExp(A.join("|")+"$","i")}for(L=0;L<K.length;L++){M=K[L];M.loaded=0;M.percent=0;M.status=t.QUEUED;if(A&&!A.test(M.name)){N.trigger("Error",{code:t.FILE_EXTENSION_ERROR,message:t.translate("File extension error."),file:M});continue}if(M.size!==y&&M.size>d.max_file_size){N.trigger("Error",{code:t.FILE_SIZE_ERROR,message:t.translate("File size error."),file:M});continue}b.push(M);I++}if(I){x(function(){m.trigger("QueueChanged");m.refresh()},1)}else{return false}});if(d.unique_names){m.bind("UploadFile",function(H,G){var A=G.name.match(/\.([^.]+)$/),F="tmp";if(A){F=A[1]}G.target_name=G.id+"."+F})}m.bind("UploadProgress",function(D,A){A.percent=A.size>0?Math.ceil(A.loaded/A.size*100):100;g()});m.bind("StateChanged",function(A){if(A.state==t.STARTED){e=(+new Date())}else{if(A.state==t.STOPPED){for(i=A.files.length-1;i>=0;i--){if(A.files[i].status==t.UPLOADING){A.files[i].status=t.QUEUED;g()}}}}});m.bind("QueueChanged",g);m.bind("Error",function(D,A){if(A.file){A.file.status=t.FAILED;
g();if(D.state==t.STARTED){x(function(){c.call(m)},1)}}});m.bind("FileUploaded",function(D,A){A.status=t.DONE;A.loaded=A.size;D.trigger("UploadProgress",A);x(function(){c.call(m)},1)});if(d.runtimes){j=[];h=d.runtimes.split(/\s?,\s?/);for(i=0;i<h.length;i++){if(p[h[i]]){j.push(p[h[i]])}}}else{j=p}function l(){var A=j[B++],F,H,G;if(A){F=A.getFeatures();H=m.settings.required_features;if(H){H=H.split(",");for(G=0;G<H.length;G++){if(!F[H[G]]){l();return}}}A.init(m,function(C){if(C&&C.success){m.features=F;m.runtime=A.name;m.trigger("Init",{runtime:A.name});m.trigger("PostInit");m.refresh()}else{l()}})}else{m.trigger("Error",{code:t.INIT_ERROR,message:t.translate("Init error.")})}}l();if(typeof(d.init)=="function"){d.init(m)}else{t.each(d.init,function(A,D){m.bind(D,A)})}},refresh:function(){this.trigger("Refresh")},start:function(){if(this.state!=t.STARTED){this.state=t.STARTED;this.trigger("StateChanged");c.call(this)}},stop:function(){if(this.state!=t.STOPPED){this.state=t.STOPPED;this.trigger("StateChanged")}},getFile:function(h){var i;for(i=b.length-1;i>=0;i--){if(b[i].id===h){return b[i]}}},removeFile:function(h){var i;for(i=b.length-1;i>=0;i--){if(b[i].id===h.id){return this.splice(i,1)[0]}}},splice:function(h,j){var i;i=b.splice(h===y?0:h,j===y?b.length:j);this.trigger("FilesRemoved",i);this.trigger("QueueChanged");return i},trigger:function(j){var h=f[j.toLowerCase()],i,k;if(h){k=Array.prototype.slice.call(arguments);k[0]=this;for(i=0;i<h.length;i++){if(h[i].func.apply(h[i].scope,k)===false){return false}}}return true},bind:function(k,i,j){var h;k=k.toLowerCase();h=f[k]||[];h.push({func:i,scope:j||this});f[k]=h},unbind:function(k){k=k.toLowerCase();var h=f[k],j,i=arguments[1];if(h){if(i!==y){for(j=h.length-1;j>=0;j--){if(h[j].func===i){h.splice(j,1);break}}}else{h=[]}if(!h.length){delete f[k]}}},unbindAll:function(){var h=this;t.each(f,function(i,j){h.unbind(j)})},destroy:function(){this.trigger("Destroy");this.unbindAll()}})};t.File=function(a,c,b){var d=this;d.id=a;d.name=c;d.size=b;d.loaded=0;d.percent=0;d.status=0};t.Runtime=function(){this.getFeatures=function(){};this.init=function(b,a){}};t.QueueProgress=function(){var a=this;a.size=0;a.loaded=0;a.uploaded=0;a.failed=0;a.queued=0;a.percent=0;a.bytesPerSec=0;a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}};t.runtimes={};window.plupload=t})();